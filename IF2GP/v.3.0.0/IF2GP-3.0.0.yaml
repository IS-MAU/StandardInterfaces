openapi: 3.0.3
info:
  title: 'performis IF2GP'
  description: 'performis IF2GP | Interface for Business Partner, Contacts and Addresses'
  contact:
    email: 'support@infosystem.ch'
  license:
    name: 'Proprietary Infosystem AG'
    url: http://www.infosystem.ch
  version: 3.0.0
security:
    - basicAuth: []
paths:
  /v3/BusinessPartner:
    get:
      tags:
      - Business Partner
      summary: Searches for Business Partners
      description: |
        With this interface the performis business partners can be searched
      operationId: searchBP
      parameters:
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/x-RequestingSystem'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/x-RequestingUser'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/x-Flow-ID'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/searchString'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/skip'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/limit'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/ChangesSinceDateTime'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/ChangeSinceChangeID'
      - name: internalBpID
        in: query
        description: |
          Retrieve specific BusinessPartner record by internal business partner ID. (Ignores other searchString options if provided)
        required: false
        schema:
          type: integer
          minimum: 1
          maximum: 9999999999
          example: 57812
        #DEV: Übersteuert alle anderen Suchfelder.
      - name: externalBpID
        in: query
        description: |
          Retrieve specific BusinessPartner record by external business partner ID. (Ignores searchString parameter if provided)
        required: false
        schema:
          type: string
          maxLength: 50
          example: '6f22f981-a9e7-4eba-b3ac-df1b869eb090'
        #DEV: Übersteuert alle anderen Suchfelder. Sucht immer zusammen mit dem x-RequestingSystem als Origin.
      - name: internalBpAddrID
        in: query
        description: |
          Retrieve specific BusinessPartner record by internal business partner address ID. (Ignores other searchString options if provided)
        required: false
        schema:
          type: integer
          minimum: 1
          maximum: 9999999999
          example: 57812
        #DEV: Übersteuert alle anderen Suchfelder.
      - name: externalBpAddrID
        in: query
        description: |
          Retrieve specific BusinessPartner record by external business partner address ID. (Ignores searchString parameter if provided)
        required: false
        schema:
          type: string
          maxLength: 50
          example: '6f22f981-a9e7-4eba-b3ac-df1b869eb090'
        #DEV: Übersteuert alle anderen Suchfelder. Sucht immer zusammen mit dem x-RequestingSystem als Origin.
      responses:
        200:
          description: Search results matching criteria
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Partners'
        400:
          $ref: './CommonResponseCodes-3.0.0.yaml#/400' 
        401:
          $ref: './CommonResponseCodes-3.0.0.yaml#/401' 
        403:
          $ref: './CommonResponseCodes-3.0.0.yaml#/403' 
        404:
          $ref: './CommonResponseCodes-3.0.0.yaml#/404' 
    put:
      tags:
      - Business Partner
      summary: Updates or creates a Business Partner
      description: Updates or creates a Business Partner
      operationId: putBusinessPartner
      parameters:
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/x-RequestingSystem'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/x-RequestingUser'
      - $ref: './CommonRequestHeaders-3.0.0.yaml#/x-Flow-ID'
      requestBody:
        description: Business Partner to update
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Partner'
              #DEV: Schema enthält jeweils interne und externe IDs zu MA, GP-MA und GP-Arbeitsort. Controller soll beide (intern und externe) IDs behandeln können.
        required: false
      responses:
        200:
          description:  If a Business Partner was updated, the updated record is returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Partner'
        201:
          description: If a Business Partner was created, the created record is returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Partner'
        400:
          $ref: './CommonResponseCodes-3.0.0.yaml#/400' 
        401:
          $ref: './CommonResponseCodes-3.0.0.yaml#/401' 
        403:
          $ref: './CommonResponseCodes-3.0.0.yaml#/403' 
        404:
          $ref: './CommonResponseCodes-3.0.0.yaml#/404' 
      x-codegen-request-body-name: BusinessPartner
components:
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
  
  schemas:
    Partners:
      type: object
      properties:
        Partners:
          type: array
          items:
            $ref: '#/components/schemas/Partner'
    
    Partner:
      type: object
      required:
        - Origin
        - Active
        - PartnerType
        - Name
        - Addresses
      properties:
        ChangeID:
          type: integer
          minimum: 1
          maximum: 9999999999
          description: 'ChangeID of the entity.'
          example: 4711
        ChangeDate:
          type: string
          format: datetime
          description: 'ChangeDate of the entity.'
        BpID:
          type: integer
          minimum: 1
          maximum: 9999999999
          description: 'performis Business Partner ID - The business partner ID uniquely identifies a business partner in performis. For example, ID "4711" for the business partner "Infosystem AG". To identify the business partner, either the performis business partner ID (BpID) or the ID of the external system (ExternalBpID) is required.'
          example: 4291
        ExternalBpID:
          type: string
          maxLength: 50
          description: 'Third-party business partner ID - This ID must be unique within the origin (Origin field). As ID it is recommended to use either the Primary Key of the foreign system or a GUID (Global Unique Identifier). Attention, if External IDs are used, no performis IDs may be used in parallel, additionally the Origin field is mandatory. E.g. ID "629c5d97-a225-4b08-877c-e8a802c23014" for origin "SAP". To identify the business partner, either the performis business partner ID (BpID) or the ID of the external system (ExternalBpID) is required.'
          example: 'f3f6f4bb-61d0-4507-9bfc-e3134c4ea9a5'
        Origin:
          type: string
          maxLength: 10
          description: 'Origin of the business partner, name of the third-party system. Business partners and addresses with an origin can''t be edited in performis.'
          example: 'SAP'
        Active:
          type: boolean
          description: 'true = active, false = deleted'
          example: true
        PartnerType:
          type: string
          enum:
            - G
            - M
            - F
            - A
          example: 'M'
          description: >
            PartnerType:
              * G - Company/Organization
              * M - man
              * F - woman
              * A - Department/Group'
        Salutation:
          type: string
          maxLength: 50
          nullable: true
          description: 'Salutation. * may only be used with PartnerType F and M'
          example: 'Mr.'
        Firstname:
          type: string
          maxLength: 50
          nullable: true
          example: 'Hans'
          description: 'First name. * may only be used with PartnerType F and M'
        Middlename:
          type: string
          maxLength: 50
          nullable: true
          example: 'Peter'
          description: 'Middle name. * may only be used with PartnerType F and M'
        Title:
          type: string
          maxLength: 50
          nullable: true
          description: 'Title. * may only be used with PartnerType F and M'
          example: 'Dr. sc. nat.'
        Name:
          type: string
          maxLength: 50
          example: 'Muster'
          description: 'Name of the business partner - if the partnertype is F or M it is the last name of the person. If the partnertyp is G or A, it is the name of the company or department.'
        NameAddition:
          type: string
          maxLength: 500
          nullable: true
          example: 'Informationssysteme und Software'
          description: 'Business partner name addition - Additional n of the business partner For example Infosystem uses an addition to its name: "Informationssysteme und Software"'
        Language:
          type: string
          maxLength: 2
          nullable: true
          description: 'Language in ISO-639-1'
          #DEV: Interne Konvertierung von ISO-639-1 auf c17. Fehler zurückgeben wenn nicht konvertierbar / unbekannter code.
          example: 'DE'
        AttributeValueSet:
          type: array
          items:
            $ref: './CommonComponents-3.0.0.yaml#/AttributeValueSet'
        Addresses:
          type: array
          items:
            $ref: '#/components/schemas/Address'

    Address:
      required:
      - Origin
      - Active
      - Country
      - ZipCode
      - City
      - Language
      type: object
      properties:
        BpAddrID:
          type: integer
          minimum: 1
          maximum: 9999999999
          description: 'performis Address ID - This ID uniquely identifies an address in performis. For example, ID "629" for address "Infosystem AG, Wil". To identify the address, either the performis address ID (BpAddrID) or the ID of the external system (ExternalBpAddrID) is required.'
          example: 281902
        ExternalBpAddrID:
          type: string
          maxLength: 50
          description: 'Third-party address ID - This ID must be unique within the origin (Origin field). As ID it is recommended to use either the Primary Key of the foreign system or a GUID (Global Unique Identifier). For example, ID "629c5d97-a225-4b08-877c-e8a802c23014" for origin "ERP".		To identify the address, either the performis address ID (BpAddrID) or the ID of the external system (ExternalBpAddrID) is required.'
          example: 'f3f6f4bb-61d0-4507-9bfc-e3134c4ea9a5'
        Origin:
          type: string
          maxLength: 10
          description: 'Origin of the business partner, name of the third-party system. Business partners and addresses with an origin can''t be edited in performis.'
          example: 'SAP'
        Active:
          type: boolean
          description: 'true = active, false = deleted'
          example: true
        ShortAddress:
          type: string
          maxLength: 50
          description: 'Short address - Short form of the address. It is generated automatically if not supplied. The short address is used in performis to identify the address. For example, the Wiler address of Infosystem AG is abbreviated as: "Infosystem AG, Wil".'
          example: 'Infosystem AG, Wil'
        OverridePartnerName:
          type: string
          maxLength: 50
          nullable: true
          description: 'If the name of the company on the address differs from that of the business partner, the name of the business partner can be overridden in this field. For example, if Infosystem AG is operating in German-speaking Switzerland as Infosystem AG, the name on the business partner will also be the same. For the Lausanne address, however, the name is overridden as "Infosystem SA".'
          example: 'Infosystem SA'
        OverridePartnerNameAddition:
          type: string
          maxLength: 50
          nullable: true
          description: 'If the name addition of the company on the address differs from that of the business partner, the name suffix of the business partner can be overridden in this field.'
          example: 'Systèmes d''information et logiciels'
        Street:
          type: string
          maxLength: 43
          nullable: true
          description: 'Street name without house number.'
          example: 'Bronschhoferstrasse'
        HouseNo:
          type: string
          maxLength: 12
          nullable: true
          description: 'House number'
          example: '31a'
        POBox:
          type: string
          maxLength: 50
          nullable: true
          description: 'he post office box of the address. The P.O. Box should be transferred including the country-specific text component. For example, for Switzerland "Postfach 12" in England "PO Box 12".'
        AdditionalLine1:
          type: string
          maxLength: 50
          nullable: true
          description: 'Additional line of an address which is neither a street nor a post office box. For example, "c/o Samuel Schnelli" or "Office Samuel Schnelli".'
          example: 'c/o Samuel Schnelli'
        AdditionalLine2:
          type: string
          maxLength: 200
          nullable: true
          description: 'Extended additional component of an address that is neither a street nor a post office box. For example, "Floor 12" or "Building 15".'
          example: 'Stockwerk 12'
        Country:
          type: string
          maxLength: 2
          description: 'Country in ISO code (ISO 3166)'
          example: 'CH'
        ZipCode:
          type: string
          maxLength: 20
          description: 'Zipcode of the address in country-specific format. Mandatory together with the country code and the city. For example, "EC1A 1AA" for London, England or "9500" for Wil, Switzerland.'
          example: '9500'
        City:
          type: string
          maxLength: 40
          description: 'city'
          example: 'Wil'
        Language:
          type: string
          maxLength: 2
          description: 'Language code in ISO-639-1'
          example: 'DE'
          #DEV: Interne Konvertierung von ISO-639-1 auf c17. Fehler zurückgeben wenn nicht konvertierbar / unbekannter code.
        SearchTerms:
          type: string
          maxLength: 500
          nullable: true
          description: 'Additional search terms under which this address is found. This is often used to use well-known abbreviations as search terms. For example, "IS" for Infosystem AG or "MS" for Microsoft.'
          example: 'IS'
        Latitude:
          type: number
          format: Decimal(10,8)
          minimum: -90
          maximum: 90
          nullable: true
          description: 'Location latitude'
          example: '46.94809'
        Longitude:
          type: number
          format: Decimal(11,8)
          minimum: -180
          maximum: 180
          nullable: true
          description: 'Location longitude'
          example: '7.44744'
        AttributeValueSet:
          type: array
          items:
            $ref: './CommonComponents-3.0.0.yaml#/AttributeValueSet'
        CommunicationAddresses:
          type: array
          items:
            $ref: '#/components/schemas/CommunicationAddress'
        Contacts:
          type: array
          items:
            $ref: '#/components/schemas/Contact'
        Contact2Documents:
          type: array
          items:
            $ref: '#/components/schemas/Contact2Document'

    Contact2Document:
      required:
      - CompanyNo
      - Contact2Document
      - Mode
      properties:
        CompanyNo:
          type: integer
          minimum: 0
          maximum: 999999
          description: 'Company for which the contact2document is created for.'
          example: 11
        BPEmployeeID:
          type: integer
          minimum: 1
          maximum: 9999999999
          example: 1104
          description: 'performis ID of employee, which is the selected recipient of the selected type of document.'
        ExternalBPEmployeeID:
          type: string
          maxLength: 50
          description: 'Third-Party ID of employee, which is the selected recipient of the selected type of document.'
          example: '6f22f981-a9e7-4eba-b3ac-df1b869eb090'
        Contact2Document:
          type: integer
          minimum: 1
          maximum: 99999999
          description: 'Type of document or correspondence (e.g. invoices), refer to value list supplied by infosystem. c686'
          example: 6860400 
        Mode:
          type: integer
          minimum: 1
          maximum: 99999999
          description: >
            Mode c688: 
              * 6880100 - Automatic
              * 6880200 - print only
              * 6880300 - email only
              * 6880400 - Print and email
          example: 6880400 

    CommunicationAddress:
      required:
      - CommAdrType
      - Value
      type: object
      properties:
        CommAdrType:
          type: integer
          minimum: 1
          maximum: 99999999
          description: >
            Specific code for communication type. Usually the following codes can be used. Your company might used different codes, please check back with Infosystem. c332
              * 3320001	Telephone
              * 3320002	Fax
              * 3320003	Mobile
              * 3320004	Additional Nummer
              * 3320005	E-Mail
              * 3320006	Internet
          example: 3320001
        Value:
          type: string
          maxLength: 500
          description: 'Value for given communication address'
          example: '+41 79 999 99 99'
    
    Contact:
      type: object
      properties:
        BpID:
          type: integer
          minimum: 1
          maximum: 9999999999
          description: 'performis Business Partner ID - The business partner ID uniquely identifies a business partner in performis. For example, ID "4711" for the business partner "Infosystem AG". To identify the business partner, either the performis business partner ID (BpID) or the ID of the external system (ExternalBpID) is used. '
          example: 4291
        ExternalBpID:
          type: string
          maxLength: 50
          description: 'Third-party business partner ID - This ID must be unique within the origin (Origin field). As ID it is recommended to use either the Primary Key of the foreign system or a GUID (Global Unique Identifier). Attention, if External IDs are used, no performis IDs may be used in parallel, additionally the Origin field is mandatory. E.g. ID "629c5d97-a225-4b08-877c-e8a802c23014" for origin "SAP". To identify the business partner, either the performis business partner ID (BpID) or the ID of the external system (ExternalBpID) is required.'
          example: 'f3f6f4bb-61d0-4507-9bfc-e3134c4ea9a5'
        Origin:
          type: string
          maxLength: 10
          description: 'Origin of the business partner, name of the third-party system. Business partners and addresses with an origin can''t be edited in performis.'
          example: 'SAP'
        Active:
          type: boolean
          description: 'true = active, false = deleted'
          example: true
        ContactType:
          type: integer
          minimum: 1
          maximum: 99999999
          description: >
            ContactType:
              * M - Man
              * F - Woman
              * A - Department
          example: 'M'
        Salutation:
          type: string
          maxLength: 50
          nullable: true
          description: 'How the contact is saluted * may only be used with PartnerType F and M'
          example: 'Mr.'
        Title:
          type: string
          maxLength: 50
          nullable: true
          description: 'If the person owns any known titles * may only be used with PartnerType F and M'
          example: 'Lord'
        FirstName:
          type: string
          maxLength: 50
          nullable: true
          description: 'Firstname  * may only be used with PartnerType F and M'
          example: 'Hans'
        MiddleName:
          type: string
          maxLength: 50
          description: 'Middlename * may only be used with PartnerType F and M'
          example: 'Peter'
        Name:
          type: string
          maxLength: 50
          description: 'Name of the business partner - if the partnertype is F or M it is the last name of the person. If the contacttyp is A, it is the name of the department.'
          example: 'Muster'
        Language:
          type: string
          maxLength: 2
          description: 'Language code in ISO-639-1'
          example: 'DE'
          #DEV: Interne Konvertierung von ISO-639-1 auf c17. Fehler zurückgeben wenn nicht konvertierbar / unbekannter code.
        Position:
          type: string
          maxLength: 100
          nullable: true
          description: 'Position or function * may only be used with PartnerType F and M'
          example: 'Chief of Engineering'
          #DEV: In ADR_ANSTELLUNG (via GP_MA_ID)
        Department:
          type: string
          maxLength: 100
          description: 'Department the contact is a member of * may only be used with PartnerType F and M'
          example: 'IT Services'
          #DEV: In ADR_ANSTELLUNG (via GP_MA_ID)
        AttributeValueSet:
          type: array
          items:
            $ref: './CommonComponents-3.0.0.yaml#/AttributeValueSet'
        CommunicationAddresses:
          type: array
          items:
            $ref: '#/components/schemas/CommunicationAddress'